---
title: "REVIEW: Analysis of the MRIO embodied landscape literature"
author: MK Lau
date: 
output: md_document
fig_caption: yes
bibliography: refs.bib
always_allow_html: yes

# Latex settings
header-includes:
  - \usepackage{endfloat}
  - \usepackage{setspace}\doublespacing
  - \usepackage{lineno}
  - \linenumbers
---

```{r setup, message=FALSE, warning=FALSE, include=FALSE}
knitr::opts_chunk$set(fig.pos = 'p') # Places figures on their own pages
knitr::opts_chunk$set(out.width = '100%', dpi=600)
```

# Overview

Summary: The goal of this review is to identify the needs for network
analysis of landscape (forests, agriculture, aquatic, built) embodied
in trade to assess the resilience of global human-natural systems to
climate change.

- Why landscape?
  - Major topics in landscape
	- Land-use change
	- Climate change
	- Invasive/disease organisms
	- Fire and drought
   - Resilience and sustainability
- What has been done?
- Why MRIO?
  - Multi-regional
  - Multi-industry
- Why networks, why ENA?
  - System-wide impacts through both direct and indirect pathways
  - Feedbacks and cycling
  - Groups and modules
  - ENA is based on IO Analysis framework
  - Compare Approaches (network vs non-network)
	- ENA
	- IO analysis
	- Telecoupling
	- Footprint analysis
	- Other? See Ecol. Econ. 2015 114
	- Virtual systems?
- What are the priorities?
  - Climate change
  - Land-use change
  - Structural analyses
	- Targets
	- Metrics
- Comparison of network and non-network metrics


# Outline

- Resilience metrics for networks of embodied landscapes
  - Landscape context
  - Disturbances
  - Conversion
- What is resilience?
  - Ecology and resilience
  - Complex systems resilience
	- MacArthur
	- May
	- Ulanowicz
	- Sheffer
- Environmental embodied trade networks
  - IO background
  - Environmental/Social
  - Landscapes
- Network metrics and resilience
  - FATH
  - Bascompte
  - Ulanowicz
- Review methods and overview
- Review: Metrics
  - IO -> MRIO -> EEMRIO
  - LEMRIO
  - IO overlap with ENA
  - ENA(IO) + ENA(LEMRIO)
- Needs and Directions
  - Climate change
  - Disturbance

# Analyses

- What work has been done on landscape mrio?
- What work has addressed resilience and stability?
- What ENA metrics have been or could be applied?

```{r loadd-data, echo=TRUE, message=FALSE, warning=FALSE}

loadd(io.bdf)

```


## keyword+title: io/mrio

```{r mrio-io, echo=TRUE, message=FALSE, warning=FALSE}

q.mrio <- grepl("INPUT-OUTPUT", io.bdf[, "DE"]) | 
    grepl("INPUT-OUTPUT", io.bdf[, "TI"]) | 
    grepl("INPUT OUTPUT", io.bdf[, "DE"]) | 
    grepl("INPUT OUTPUT", io.bdf[, "TI"]) 

```

## keyword+title: mrio & landscape

```{r mrio-land, echo=TRUE, message=FALSE, warning=FALSE}

q.land <- grepl("^LAND", io.bdf[, "DE"]) | 
    grepl("^LAND", io.bdf[, "TI"]) | 
    grepl(" LAND", io.bdf[, "DE"]) | 
    grepl(" LAND", io.bdf[, "TI"]) 

```

## keyword+title: mrio & network/ena

```{r mrio-ena, echo=TRUE, message=FALSE, warning=FALSE}

q.net <- (grepl("NETWORK ANALYS", io.bdf[, "DE"]) | 
    grepl("NETWORK ANALYS", io.bdf[, "TI"])) & 
	!(grepl("ECOLOGICAL NETWORK ANALYS", io.bdf[, "DE"]) | 
    grepl("ECOLOGICAL NETWORK ANALYS", io.bdf[, "TI"]))
q.ena <- grepl("ECOLOGICAL NETWORK ANALYS", io.bdf[, "DE"]) | 
    grepl("ECOLOGICAL NETWORK ANALYS", io.bdf[, "TI"]) &
    !(q.net)

```

## keyword+title: resilience

```{r mrio-res, echo=TRUE, message=FALSE, warning=FALSE}

q.res <- grepl("^RESILIEN", io.bdf[, "TI"]) | 
    grepl("^RESILIEN", io.bdf[, "DE"]) | 
    grepl(" RESILIEN", io.bdf[, "TI"]) | 
    grepl(" RESILIEN", io.bdf[, "DE"]) 
q.res.abs <- grepl("^RESILIEN", io.bdf[, "TI"]) | 
    grepl("^RESILIEN", io.bdf[, "DE"]) | 
    grepl(" RESILIEN", io.bdf[, "TI"]) | 
    grepl(" RESILIEN", io.bdf[, "DE"]) | 
    grepl("^RESILIEN", io.bdf[, "AB"]) | 
    grepl(" RESILIEN", io.bdf[, "AB"]) 

```

## keyword+title: disturbance(climate change, other)

```{r mrio-dist, echo=TRUE, message=FALSE, warning=FALSE}

q.mc <- grepl("^CLIMATE", io.bdf[, "TI"]) | 
    grepl("^CLIMATE", io.bdf[, "DE"]) | 
    grepl(" CLIMATE", io.bdf[, "TI"]) | 
    grepl(" CLIMATE", io.bdf[, "DE"]) 
q.md <- grepl("^DISTURB", io.bdf[, "TI"]) | 
    grepl("^DISTURB", io.bdf[, "DE"]) | 
    grepl(" DISTURB", io.bdf[, "TI"]) | 
    grepl(" DISTURB", io.bdf[, "DE"]) 

```

## keyword+title: coupled-human natural systems

```{r mrio-chns, echo=TRUE, message=FALSE, warning=FALSE}

q.chns <- grepl("HUMAN-NATURAL", io.bdf[, "TI"]) | 
    grepl("HUMAN-NATURAL", io.bdf[, "DE"]) |
    grepl("HUMAN-NATURAL", io.bdf[, "AB"]) |
    grepl("HUMAN NATURAL", io.bdf[, "TI"]) | 
    grepl("HUMAN NATURAL", io.bdf[, "DE"]) |
    grepl("HUMAN NATURAL", io.bdf[, "AB"]) 

```
## keyword+title: ena & resilience+stability & metrics

```{r mrio-met, echo=TRUE, message=FALSE, warning=FALSE}

q.met <- grepl(" METRIC", io.bdf[, "TI"]) | 
    grepl(" METRIC", io.bdf[, "DE"]) |
    grepl(" METRIC", io.bdf[, "AB"]) |
    grepl("^METRIC", io.bdf[, "TI"]) | 
    grepl("^METRIC", io.bdf[, "DE"]) |
    grepl("^METRIC", io.bdf[, "AB"]) & 
    q.net &
    q.res
q.met.land <- q.met & q.land

```

## type: review 

```{r mrio-rev, echo=TRUE, message=FALSE, warning=FALSE}

q.rev <- grepl("REVIEW", io.bdf[, "DT"]) | 
    grepl("REVIEW", io.bdf[, "DE"]) | 
    grepl("REVIEW", io.bdf[, "TI"]) 
q.ov <- grepl("OVERVIEW", io.bdf[, "DT"]) |
    grepl("OVERVIEW", io.bdf[, "DE"]) | 
    grepl("OVERVIEW", io.bdf[, "TI"]) 

```

# Papers

## QUERY: IO/MRIO

```{r papers-iomrio, echo=TRUE, message=FALSE, warning=FALSE}

head(io.bdf[q.mrio, c("TI")])

```

## QUERY: Reviews/Overviews

```{r papers-rev, echo=TRUE, message=FALSE, warning=FALSE}

io.bdf[q.rev | q.ov, c("TI")]

```

## QUERY: ENA/Network

```{r papers-ena, echo=TRUE, message=FALSE, warning=FALSE}

io.bdf[q.ena | q.ov, c("TI")]

```

```{r papers-net, echo=TRUE, message=FALSE, warning=FALSE}

io.bdf[q.net | q.ov, c("TI")]

```

## QUERY: Metrics

```{r papers-met, echo=TRUE, message=FALSE, warning=FALSE}

io.bdf[q.met, c("TI")]

```

```{r papers-met-land, echo=TRUE, message=FALSE, warning=FALSE}

io.bdf[q.met & q.land, c("TI")]

```


## QUERY: Resilience

```{r papers-res, echo=TRUE, message=FALSE, warning=FALSE}

io.bdf[q.res, c("TI")]

```

# Literature Review: Methods and Background

```{r key-words, echo = TRUE, message = FALSE, warning = FALSE}

kw <- gsub(";", "", unlist(strsplit(io.bdf[q.land, "DE"], split = "; ")))
kw <- sapply(kw, rm.spch)
kw <- unlist(strsplit(kw, " "))
kw.tab <- table(kw)

```

```{R art-year, echo=FALSE, message=FALSE, warning=FALSE, fig.cap=""}

plot(melt(table(io.bdf[, "PY"])), 
	type = "l", xlab = "", ylab = "Articles")

```


```{R kw-treemap, echo=FALSE, message=FALSE, warning=FALSE, fig.cap=""}

data <- melt(kw.tab)
data <- data[order(data[, "value"], decreasing = TRUE), ][1:25, ]
colnames(data) <- c("group", "value")
treemap(data, index=c("group"), vSize="value", type="index",
        fontsize.labels=c(15),
        fontcolor.labels=c("white"),
        fontface.labels=c(2),
        bg.labels=c("transparent"),
        align.labels=list(
            c("center", "center")
        ),
        overlap.labels=0.5,
        inflate.labels=F,
	)

```

```{r query-list, echo=FALSE, message=FALSE, warning=FALSE, paged.print=FALSE}

q.all <- list("IO_MRIO" = q.mrio, Land = q.land, 
	          "Climate Change" = q.mc, Resilience = q.res,
	          Metric = q.met, Network = q.net, ENA = q.ena, CHNS = q.chns, 
	          "Land Metrics" = q.met.land, Review = (q.rev | q.ov))

```

```{r topic-table, echo=FALSE, message=FALSE, warning=FALSE, paged.print=FALSE, results="asis"}

count <- c(unlist(lapply(q.all, sum)), nrow(io.bdf))
pct <- count / nrow(io.bdf) * 100
pct <- round(pct, 2)
q.df <- data.frame(topic = c(names(q.all), "Total"), count = count, percent = pct)
knitr::kable(q.df, caption = "", booktabs = TRUE, row.names = FALSE)

```


```{r export-query, echo = TRUE, message = FALSE, warning = FALSE}

export_query(io.bdf, q.all, dir = "data/wos-mrio_query", overwrite = TRUE)
mk_review(io.bdf, q.all[-1], file = "results/wos_review.md", overwrite = TRUE)

```

<!-- q.all <- list("IO_MRIO" = q.mrio, Land = q.land, Resilience = q.res, -->
<!-- 	          "Climate Change" = q.mc,  -->
<!-- 	          Metric = q.met, Network = q.net, ENA = q.ena, CHNS = q.chns,  -->
<!-- 	          "Land Metrics" = q.met.land, Review = (q.rev | q.ov)) -->


## Searched and Reviewed "Land" Query

- Searched within queried papers and found papers with MRIO, network
  or resilience
- Need to add telecoupling and land-system science articles
- Recompile using a cross-referencing = LAND & MRIO | NETWORK |
  RESILIENCE | SUSTAINABILITY


# References
